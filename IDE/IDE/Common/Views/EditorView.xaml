<UserControl x:Name="window"
             x:Class="IDE.Common.Views.Editor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             d:DesignHeight="300" d:DesignWidth="300"
             mc:Ignorable="d"
             
             xmlns:properties="clr-namespace:IDE.Properties"
             xmlns:ct="clr-namespace:ChromeTabs;assembly=ChromeTabs"
             xmlns:ctConv="clr-namespace:ChromeTabs.Converters;assembly=ChromeTabs">

    

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="9*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="6*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        
        <!--#region Menu DONT FORGET TO BIND MENU ITEMS BACKGROUND COLOR-->

        <StackPanel>
            <StackPanel Orientation="Horizontal"  Grid.Row="0" Grid.Column="0">
                <StackPanel Background="LightBlue">
                    <Image Source="/Icons/Menu-32.png" Stretch="None"/>

                    <StackPanel.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="New file" Command="{Binding AddTabCommand}"/>
                            <MenuItem Header="Save"/>
                            <MenuItem Header="Save as"/>
                            <MenuItem Header="Save all"/>
                        </ContextMenu>
                    </StackPanel.ContextMenu>

                </StackPanel>
                <StackPanel Background="LightBlue" Margin="10,0,0,0">
                    <Image Source="/Icons/Settings-32.png" Stretch="None"/>
                </StackPanel>
            </StackPanel>
        </StackPanel>



        <!--#endregion-->

        <!--#region TabControl-->

        <!--The tab control with with tab tearing support.-->
        <ct:ChromeTabControl AddTabButtonBehavior="OpenNewTab"
                             ItemsSource="{Binding TabItems}"
                             SelectedItem="{Binding SelectedTab}"
                             IsAddButtonVisible="{Binding ShowAddButton}"
                             AddTabCommand="{Binding AddTabCommand}"
                             CloseTabCommand="{Binding CloseTabCommand}"
                             Grid.Row="1" Grid.Column="0">

            <!-- BINDING CONTENT -->
            <ct:ChromeTabControl.ItemContainerStyle>
                <Style TargetType="ct:ChromeTabItem">
                    <Setter Property="Content" Value="{Binding Content}"/>
                </Style>
            </ct:ChromeTabControl.ItemContainerStyle>

            <!-- BINDING HEADER AND MAKING CONTEXT MENU-->
            <ct:ChromeTabControl.ItemTemplate>
                <DataTemplate>
                    <Grid Tag="{Binding RelativeSource={RelativeSource AncestorType={x:Type ct:ChromeTabItem}}}">
                        <StackPanel Orientation="Horizontal"
                                    Background="Transparent">
                            <Image Source="{Binding Image}"
                                   Stretch="Fill"
                                       Margin="5,5,5,5" />
                            <TextBlock Text="{Binding Header}"
                                       TextWrapping="NoWrap"
                                       TextTrimming="CharacterEllipsis"
                                       VerticalAlignment="Center" />
                        </StackPanel>

                        <!--We can implement a context menu for the header here. The ChromeTabItems expose for convenience the following commands, "CloseTabCommand: close the current tab, "CloseAllTabsCommand", and "CloseOtherTabsCommand", which closes all tabs except the current.-->
                        <Grid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Close"
                                          Command="{Binding Path=PlacementTarget.Tag.CloseTabCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          CommandTarget="{Binding Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                <MenuItem Header="Close all"
                                          Command="{Binding Path=PlacementTarget.Tag.CloseAllTabsCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          CommandTarget="{Binding Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                <MenuItem Header="Close other tabs"
                                          Command="{Binding Path=PlacementTarget.Tag.CloseOtherTabsCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                                          CommandTarget="{Binding Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          CommandParameter="{Binding}" />
                            </ContextMenu>
                        </Grid.ContextMenu>
                    </Grid>
                </DataTemplate>
            </ct:ChromeTabControl.ItemTemplate>
        </ct:ChromeTabControl>

        <!--#endregion-->

        <!--#region PolisionList-->

        <TextBlock Text="This is where position manager would be but we have wyjebane"
                   FontSize="18" Foreground="DarkGreen"
                   Margin="50, 50, 0, 0"
                   Grid.Row="1" Grid.Column="1">
            <TextBlock.RenderTransform>
                <RotateTransform Angle="45"/>
            </TextBlock.RenderTransform>
        </TextBlock>

        <!--#endregion-->


    </Grid>


</UserControl>
